#!/bin/sh 

# 0:F
# 1:C
METRIC=0
 
if [ -z "$1" ]; then
echo
echo "USAGE: weather.sh <locationcode>"
echo
exit 0;
fi

curl -s http://rss.accuweather.com/rss/liveweather_rss.asp\?metric\=$METRIC\&locCode\=$1 | \grep "Currently:" | sed 's/\(<title>\|<\/title>\)//g' | awk '{$1="";print}' > /tmp/weather

current_weather=$(awk -F':' '{print $1}' /tmp/weather | xargs)

temperature=$(awk -F':' '{print $2}' /tmp/weather | xargs)

case $current_weather in
    "Sunny")
        icon=''
        ;;
    "Partly Sunny")
        icon=''
        ;;
    "Mostly Sunny")
        icon=''
        ;;
    "Intermittent Clouds")
        icon=''
        ;;
    "Hazy Sunshine")
        icon=''
        ;;
    "Hazy Moonlight")
        icon=''
        ;;
    "Hot")
        icon=''
        ;;
    "Clear")
        icon=''
        ;;
    "Mostly Clear")
        icon=''
        ;;
    "Mostly Clear w/ Flurries")
        icon=''
        ;;
    "Flurries")
        icon=''
        ;;
    "Windy")
        icon=''
        ;;
    "Partly Cloudy")
        icon=''
        ;;
    "Mostly Cloudy")
        icon=''
        ;;
    "Mostly Cloudy w/ Showers")
        icon=''
        ;;
    "Partly Cloudy w/ Showers")
        icon=''
        ;;
    "T-Storms")
        icon=''
        ;;
    "Thunderstorms")
        icon=''
        ;;
    "Mostly Cloudy w/ T-Storms")
        icon=' '
        ;;
    "Mostly Cloudy w/ Snow")
        icon=''
        ;;
    "Snow")
        icon=''
        ;;
    "Rain and Snow")
        icon=''
        ;;
    "Partly Cloudy w/ T-Storms")
        icon=''
        ;;
    "Rain")
        icon=''
        ;;
    "Dreary (Overcast)")
        icon=''
        ;;
    "Cloudy")
        icon=''
        ;;
    "Fog")
        icon=''
        ;;
    "Showers")
        icon=''
        ;;
    *)
        icon='TO BE IMPLEMENTED'
        ;;
esac

# printf "<span>%s</span>\n" "$icon $temperature"
echo "$icon  $temperature"
