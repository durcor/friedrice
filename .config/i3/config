# ~/.config/i3/config
# vi:ft=i3config

set_from_resource $c0 color0
set_from_resource $c1 color1
set_from_resource $c2 color2
set_from_resource $c3 color3
set_from_resource $c4 color4
set_from_resource $c5 color5
set_from_resource $c6 color6
set_from_resource $c7 color7
set_from_resource $c8 color8
set_from_resource $c9 color9
set_from_resource $c10 color10
set_from_resource $c11 color11
set_from_resource $c12 color12
set_from_resource $c13 color13
set_from_resource $c14 color14
set_from_resource $c15 color15
set_from_resource $font def-font

set $ex exec --no-startup-id
set $exa exec_always --no-startup-id

set $mode-notif notify-send -h string:x-canonical-private-synchronous:i3mode -u low

set $terminal kitty
set $browser firefox-nightly

# font for window titles+status bar
font pango: $font 9

#mode [--pango_markup foreground=blue] MANAGER {
#mode --pango_markup "<span color='blue'>MANAGER</span>" {
mode MANAGER {
    bindsym XF86AudioRaiseVolume $ex pamixer --allow-boost -i 5
    bindsym F3 $ex pamixer --allow-boost -i 5
    bindsym XF86AudioLowerVolume $ex pamixer --allow-boost -d 5
    bindsym F1 $ex pamixer --allow-boost -d 5
    bindsym XF86AudioMute $ex pamixer -t
    bindsym F1 $ex pamixer -t
    bindsym XF86AudioPrev $ex mpc prev
    bindsym F5 $ex mpc prev
    bindsym XF86AudioNext $ex mpc next
    bindsym F7 $ex mpc next
    bindsym XF86AudioPlay $ex mpc toggle
    bindsym F6 $ex mpc toggle
    bindsym --release Print $ex "maim -u -n 2 -s | xclip -se c -i"
    
    bindsym Return $ex $terminal
    
    # mouse + binding moves floating windows
    # floating_modifier Mod4
    
    bindsym --release q $ex slock -m "$(cowsay -f tux "Locked at $(date +%H:%M)")" xset dpms force off
    bindsym --release Shift+q $ex sudo slock -m "$(cowsay -f tux "Locked at $(date '%H:%M')")" systemctl suspend
    bindsym --release XF86Sleep $ex sudo slock -m "$(cowsay -f tux "Locked at $(date '%H:%M')")" systemctl suspend
    bindsym u $ex "xclip -t -se p | xclip -i -s c"
    bindsym slash $ex dmenual -i -p run
    bindsym Shift+slash $ex rofi -show run
    bindsym Shift+f $ex $terminal -e lf
    bindsym Shift+b $ex clipmenu
    bindsym p $ex mpv $(xclip -se c -o)
    bindsym Shift+p $ex passmenu -p pass
    
    bindsym Menu [instance="pop"] scratchpad show; [instance="pop"] move position center
    
    bindsym x kill
    
    bindsym equal sticky toggle
    
    bindsym h focus left
    bindsym j focus down
    bindsym k focus up
    bindsym l focus right
    
    bindsym Shift+h move left 60 px
    bindsym Shift+j move down 60 px
    bindsym Shift+k move up 60 px
    bindsym Shift+l move right 60 px
    
    bindsym Mod1+h move left 10 px
    bindsym Mod1+j move down 10 px
    bindsym Mod1+k move up 10 px
    bindsym Mod1+l move right 10 px
    
    bindsym Control+h move left 2 px
    bindsym Control+j move down 2 px
    bindsym Control+k move up 2 px
    bindsym Control+l move right 2 px
    
    bindsym backslash split h ; $ex notify-send -h string:x-canonical-private-synchronous:i3tiling -u low "HORIZONTAL TILING"
    bindsym minus split v ; $ex notify-send -h string:x-canonical-private-synchronous:i3tiling -u low "VERTICAL TILING"
    
    bindsym b workspace prev
    bindsym w workspace next
    
    bindsym Shift+equal fullscreen toggle
    
    # change container layout (stacked, tabbed, toggle split)
    bindsym s layout stacking
    bindsym t layout tabbed
    bindsym e layout toggle split

    bindsym n focus parent
    bindsym m focus child
    
    # toggle tiling / floating
    bindsym Shift+space floating toggle
    
    # change focus between tiling / floating windows
    bindsym space focus mode_toggle
    
    bindsym 1 workspace $ws1
    bindsym 2 workspace $ws2
    bindsym 3 workspace $ws3
    bindsym 4 workspace $ws4
    bindsym 5 workspace $ws5
    bindsym 6 workspace $ws6
    bindsym 7 workspace $ws7
    bindsym 8 workspace $ws8
    bindsym 9 workspace $ws9
    bindsym 0 workspace $ws10
    
    bindsym Shift+1 move container to workspace $ws1
    bindsym Shift+2 move container to workspace $ws2
    bindsym Shift+3 move container to workspace $ws3
    bindsym Shift+4 move container to workspace $ws4
    bindsym Shift+5 move container to workspace $ws5
    bindsym Shift+6 move container to workspace $ws6
    bindsym Shift+7 move container to workspace $ws7
    bindsym Shift+8 move container to workspace $ws8
    bindsym Shift+9 move container to workspace $ws9
    bindsym Shift+0 move container to workspace $ws10
    
    bindsym Shift+c reload ; mode MANAGER
    bindsym Shift+r restart ; mode MANAGER
    bindsym Shift+e $ex "i3-nagbar -t warning -m 'exit i3?' -b 'yes' 'i3-msg exit'"
    
    bindsym i mode "WINDOW"; $ex $mode-notif "WINDOW MODE"
    bindsym a mode "WINDOW"; $ex $mode-notif "WINDOW MODE"
    bindsym A mode "WINDOW"; $ex $mode-notif "WINDOW MODE"
    bindsym I mode "WINDOW"; $ex $mode-notif "WINDOW MODE"
    
    bindsym o mode "LAUNCH"; $ex $mode-notif "LAUNCH MODE"
    bindsym g mode "GAPS"; $ex $mode-notif "GAPS MODE"
    bindsym m mode "MUSIC"; $ex $mode-notif "MUSIC MODE"
    bindsym z mode "AUDIO"; $ex $mode-notif "AUDIO MODE"
    bindsym Shift+colon mode "COMMAND"; $ex $mode-notif "COMMAND MODE"
    bindsym r mode "RESIZE"; $ex $mode-notif "RESIZE MODE"
    bindsym v mode "VISUAL"; $ex $mode-notif "VISUAL MODE"
    bindsym c mode "BRIGHTNESS"; $ex $mode-notif "BRIGHTNESS MODE"
}

mode WINDOW {
    bindsym Super_L mode "MANAGER"; $ex $mode-notif "MANAGER MODE"

    bindsym XF86AudioRaiseVolume $ex pamixer --allow-boost -i 5 ; $ex pkill -RTMIN+13 i3blocks
    bindsym XF86AudioLowerVolume $ex pamixer --allow-boost -d 5 ; $ex pkill -RTMIN+13 i3blocks
    bindsym XF86AudioMute $ex pamixer -t ; $ex pkill -RTMIN+13 i3blocks
    bindsym XF86AudioStop $ex playerctl stop
    bindsym XF86AudioPrev $ex playerctl previous
    bindsym XF86AudioNext $ex playerctl next
    bindsym XF86AudioPlay $ex playerctl play-pause
    bindsym XF86AudioPause $ex playerctl play-pause
    bindsym XF86Search $ex dmenual
    bindsym XF86Calculator $ex $terminal -e bc -ql
    bindsym XF86HomePage $ex dmenual
    bindsym XF86Tools $ex dmenual
    bindsym --release Print $ex "maim -u -n 2 -s | xclip -se c -i"
}

bindsym Super_L mode "MANAGER" ; $ex $mode-notif "MANAGER MODE"

mode "RESIZE" {
    bindsym h resize shrink width 40 px or 5 ppt
    bindsym j resize shrink height 40 px or 5 ppt
    bindsym k resize grow height 40 px or 5 ppt
    bindsym l resize grow width 40 px or 5 ppt
    
    bindsym Mod1+h resize shrink width 20 px or 2 ppt
    bindsym Mod1+j resize shrink height 20 px or 2 ppt
    bindsym Mod1+k resize grow height 20 px or 2 ppt
    bindsym Mod1+l resize grow width 20 px or 2 ppt
    
    bindsym Control+h resize shrink width 10 px or 1 ppt
    bindsym Control+j resize shrink height 10 px or 1 ppt
    bindsym Control+k resize grow height 10 px or 1 ppt
    bindsym Control+l resize grow width 10 px or 1 ppt
    
    bindsym Shift+h resize shrink width 80 px or 10 ppt
    bindsym Shift+j resize shrink height 80 px or 10 ppt
    bindsym Shift+k resize grow height 80 px or 10 ppt
    bindsym Shift+l resize grow width 80 px or 10 ppt
    
    bindsym Escape mode "MANAGER" ; $ex $mode-notif "MANAGER MODE"
}

mode "GAPS" {
    bindsym h gaps inner current minus 5
    bindsym l gaps inner current plus 5
    bindsym j gaps outer current minus 5
    bindsym k gaps outer current plus 5
    
    bindsym Escape mode "MANAGER"
}

mode "MUSIC" {
    bindsym h $ex playerctl previous
    bindsym l $ex playerctl next
    bindsym j $ex playerctl position 5-
    bindsym k $ex playerctl position 5-
    bindsym v $ex mpdmenu
    bindsym z $ex playerctl shuffle "On"
    bindsym space $ex playerctl play-pause
    bindsym m mode "MPD"; $ex $mode-notif "MPD"
    
    bindsym Escape mode "MANAGER" ; $ex $mode-notif "MANAGER MODE"
}

mode "MPD" {
    bindsym h exec $ex mpc prev
    bindsym l exec $ex mpc next
    bindsym j exec $ex mpc seek -5
    bindsym k exec $ex mpc seek +5
    bindsym v exec $ex notify-send "$(mpc status)"
    bindsym z exec $ex mpc random ; notify-send " " ""
    bindsym space $ex mpc toggle
    
    bindsym Escape mode "MANAGER" ; $ex $mode-notif "MANAGER MODE"
}

mode "AUDIO" {
    bindsym h $ex pamixer --allow-boost -d 1 ; $ex pkill -RTMIN+13 i3blocks
    bindsym l $ex pamixer --allow-boost -i 1 ; $ex pkill -RTMIN+13 i3blocks
    bindsym j $ex pamixer --allow-boost -d 5 ; $ex pkill -RTMIN+13 i3blocks
    bindsym k $ex pamixer --allow-boost -i 5 ; $ex pkill -RTMIN+13 i3blocks
    bindsym v $ex notifaudio
    bindsym space $ex pamixer -t ; $ex pkill -RTMIN+13 i3blocks
    
    bindsym Escape mode "MANAGER"; $ex $mode-notif "MANAGER MODE"
}

mode "LAUNCH" {
    bindsym n $ex $terminal -e newsboat
    bindsym w $ex $browser
    bindsym m $ex $terminal -e neomutt
    bindsym c $ex $terminal -e ncmpcpp -s visualizer
    bindsym v $ex $terminal -e gotop
    bindsym a $ex $terminal -e pulsemixer
    
    bindsym Escape mode "MANAGER"; $ex $mode-notif "MANAGER MODE"
}

mode "COMMAND" {
    bindsym --release q $ex slock xset dpms force off
    bindsym --release Shift+q $ex sudo slock systemctl suspend
    
    bindsym Escape mode "MANAGER"; $ex $mode-notif "MANAGER MODE"
}

mode "VISUAL" {
    bindsym --release s $ex scrman
    bindsym --release c $ex scrman cp
    bindsym --release u $ex scrman up
    
    bindsym Escape mode "MANAGER"; $ex $mode-notif "MANAGER MODE"
}

mode "BRIGHTNESS" {
    bindsym h exec backlightctl down 1
    bindsym l exec backlightctl up 1
    bindsym j exec backlightctl down 10
    bindsym k exec backlightctl up 10
    
    bindsym Escape mode "MANAGER"; $ex $mode-notif "MANAGER MODE"
}

gaps inner 10
gaps outer 0

# window border width
for_window [class="^.*"] border pixel 2

for_window [class="mpv"] floating enable
for_window [class="Pavucontrol"] floating enable
no_focus [class="mpv"]
no_focus [class="discord"]
# focus_on_window_activation urgent

#gen
set $ws1 "1"
#mus
set $ws4 "4"
#rss
set $ws3 "3"
#term
set $ws10 "10"
#img
set $ws7 "7"
#game
set $ws6 "6"
#mail
set $ws5 "5"
#file
set $ws8 "8"
#dl
set $ws9 "9"
#chat
set $ws2 "2"

assign [class="Lutris"] $ws6
assign [class="discord"] $ws1
assign [class="qutebrowser"] $ws1
for_window [class="Spotify"] move to workspace $ws4
for_window [instance="origin.exe"] floating enable
assign [class="Steam"] $ws6
assign [instance="origin.exe"] $ws6

# class                 border	backgr. text	indicator	child_border
client.focused          $c7		$c7		$c7		$c7			$c7
client.focused_inactive $c0		$c2		$c7		$c2			$c2
client.unfocused        $c0		$c2		$c2		$c2			$c2
client.urgent           $c0		$c2		$c8		$c2			$c2
client.placeholder      $c0		$c2		$c7		$c2			$c2

client.background       $c0

bar {
    status_command i3blocks
    position top
    separator_symbol /
    strip_workspace_numbers no
  
    colors {
        background $c0
        statusline $c7
        separator  $c1
        # class				border 	bg		txt
        focused_workspace 	$c0 	$c15 	$c0
        # active_workspace
        inactive_workspace	$c0		$c7 	$c0
        urgent_workspace	$c0		$c1		$c0
        binding_mode        $c0     $c10    $c0
    	}
}

for_window [instance="pop"] floating enable
for_window [instance="pop"] resize set 900 600
for_window [instance="pop"] move scratchpad
for_window [instance="pop"] border pixel 10
exec $terminal --class pop

for_window [instance="float"] floating enable

$ex $terminal
$ex nm-applet
$ex mullvad-vpn
# exec qutebrowser
$ex firefox-nightly
$exa ~/.fehbg
$ex discord
$ex cfg rf
$exa i3-msg mode MANAGER
# exec xrandr --output HDMI-A-1 --auto --left-of DisplayPort-1
# $exa $HOME/.config/polybar/launch.sh
