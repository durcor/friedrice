#!/bin/sh
# The smartest file opener of all time :^)

for f in "$@"; do
	case $f in
		*.exe)
			wine "$f"
			;;
		*.dll)
			edit "$f"
			;;
		*.love)
			love "$f"
			;;
		*.bik)
			mpv "$f"
			;;
		*.url)
			$GUIBROWSER "$(cat "$f")"
			;;
		*)
			case "$(file --mime-type "$f" -bL)" in
				# text/*|application/json|inode/*|application/z*)
				#     edit "$1"
				#         ;;
				image/vnd.adobe.photoshop)
					gimp "$f"
					;;
				video/*|image/*|audio/*)
					mpv "$f"
						;;
				application/pdf)
					zathura "$f"
						;;
				application/x-dosexec)
					wine "$f"
						;;
				application/x-pie-executable)
					"$f"
						;;
				application/vnd*)
					libreoffice "$f"
						;;
				text/x-shellscript)
					"$f" || (chmod +x "$f" && "$f") || (sudo chmod +x "$f" && "$f")
						;;
				text/html)
					firefox-nightly "$f"
						;;
				application/x-iso9660-image)
					# spin up a vm using this iso as a virtual disk
					edit "$f"
						;;
				*)
					edit "$f"
						;;
			esac
			;;
	esac
done
